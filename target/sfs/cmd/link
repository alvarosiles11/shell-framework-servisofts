#!/bin/bash

JSON commands new
JSON options new
export_module commands options

sfproject=($(_is_sfs_project "$PWD"))
sfp_path="$PWD"
sfp_name=${sfproject[0]}
sfp_version=${sfproject[1]}
# ------ CODE ------

# VERSION=1.0.1
# BIN_PATH="/usr/local/bin"
# COMPILE_FOLDER="target"
# INSTALATION_PATH="/opt"

src_path="$PWD/src"
name_temporal="$INSTALATION_PATH/${sfp_name}/${sfp_name}___link___"
ln -s "$src_path" "$INSTALATION_PATH/$sfp_name"
cat >"$name_temporal" <<EOF
#!/usr/bin/env bash
source "$INSTALATION_PATH/$sfp_name/$sfp_name" \$@
EOF
chmod +x $name_temporal
ln -s $name_temporal $BIN_PATH/$sfp_name

sconsole -a "Link succeded"
